<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>X! Interpreter</title>
    <style>
      * {
        color-scheme: dark;
        font-family: monospace;
        font-size: 1rem;
      }

      button,
      textarea,
      pre {
        display: block;
        border: 0.1em solid white;
        color: white;
        background-color: black;
        margin: 0.2em;
        width: 90%;
        border-radius: 0.5em;
      }
    </style>
  </head>
  <body>
    <h1>X! Interpreter</h1>
    <p>An Esoteric Programming Language</p>
    <button onclick="run()">Run</button>
    <textarea autofocus style="height:50vh">
=hi;/=world;.#/=you;\=hey;.#=number;/:(10*2)+1;.
    [hi world\n hey you\n number 21]</textarea
    >
    <pre>Output Here</pre>
    <br />
    <hr size="1" />
    <h2>Documentation</h2>
    <p>
      The Interpreter Is Simple, But The Syntax Will Make You Go Crazy! So Read
      The Docs If You Are Confused:
    </p>
    <h3>How It Works</h3>
    <p>
      When You Run Your Program The Interpreter Initializes An Empty Array. You
      Write 1 Or 2 Character Commands To Read And Write From This Array.
    </p>
    <h3>Learning Commands</h3>
    <p>There Are 7 Commands In This Language. Heres How To Use Them:</p>
    <ul>
      <li><bold>/</bold> - Moves The Position Up</li>
      <li><bold>\</bold> - Moves The Position Down</li>
      <li><bold>.</bold> - Prints The Array</li>
      <li><bold>#</bold> - Clears The Array</li>
      <li><bold>=<i>text</i>;</bold> - Sets Array Value At Current Position</li>
      <li><bold>:<i>code</i>;</bold> - Sets Array Value But Evaluates JS</li>
      <li><bold>[<i>text</i>]</bold> - Code Comments</li>
    </ul>
    <script>
      function run() {
        const code = document.querySelector("textarea").value.split("");
        const out = document.querySelector("pre");
        let array = [];
        let pos = 0;
        let skip = false;

        out.innerText = "";
        code.forEach((c, i) => {
          if (c === ";" || c === "]") {
            skip = false;
          } else if (skip) {
            return;
          } else if (c === "/") {
            pos++;
          } else if (c === "\\") {
            pos--;
          } else if (c === "[") {
            skip = true;
          } else if (c === "=") {
            array[pos] = code
              .slice(i + 1, code.indexOf(";", i))
              .join("")
              .replace(/[\s\n]/g, "");
            skip = true;
          } else if (c === ":") {
            array[pos] = eval(code.slice(i + 1, code.indexOf(";", i)).join(""));
            skip = true;
          } else if (c === ".") {
            out.innerText += array.join(" ") + "\n";
          } else if (c === "#") {
            array = [];
          } else return;
        });
      }

      document.onkeydown = (e) => {
        if (e.keyCode === 13) run();
      };
    </script>
  </body>
</html>
